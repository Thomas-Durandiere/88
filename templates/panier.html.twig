{% extends 'base.html.twig' %}

{% block title %}Panier{% endblock %}

{% block body %}

     {% if is_granted("ROLE_ADMIN") %}
        <div class="bandeauLog darkMode">
            <a class="boutAct" href="{{ path('app_ajouter')}}" >Ajouter</a>
            <a class="boutAct" href="{{ path('app_messages')}}" >Messages</a>
            <a href="{{ path('app_logout')}}" ><img class="deco" id="iconDeco" src="{{ asset('images/logo/deco.png') }}" data-light="{{ asset('images/logo/deco.png') }}" 
                data-dark="{{ asset('images/logo/decoB.png') }}" alt="D√©connexion" title="D√©connexion"></a>
        </div>
            {% elseif is_granted("ROLE_USER") %} 
        <div class="bandeauLog darkMode">
            <a class="boutAct" type="button" href="{{ path('app_panier')}}" >Panier</a>
            <a href="{{ path('app_logout')}}" ><img class="deco" id="iconDeco" src="{{ asset('images/logo/deco.png') }}" data-light="{{ asset('images/logo/deco.png') }}" 
                data-dark="{{ asset('images/logo/decoB.png') }}" alt="D√©connexion" title="D√©connexion"></a>
        </div>
        {% endif %}
        

    <h2 id="h2Infos">Panier</h2>

    <div class="affPanier">        
        
        <div class="panier">
            {% for op in panier.getOrderProducts %}
        
            <div class="panierArt darkMode">
                <div class="cardPanier">
                    <img src="{{ op.getProducts.pic }}">
                    <h3>{{ op.getProducts.name }}</h3>
                    <p>{{ op.getPriceUnit }} ‚Ç¨</p>
                    <button class="quantitySup" data-op-id="{{ op.id }}">üóëÔ∏è</button>
                    <button class="quantity-" data-op-id="{{ op.id }}">-</button>
                    <span>{{ op.getQuantity }}</span>
                    <button class="quantity+" data-op-id="{{ op.id }}">+</button>
                    <p>{{ (op.getQuantity * op.getPriceUnit)|number_format(2, '.', ',') }} ‚Ç¨</p>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="recap darkMode">
            <h3>R√©capiculatif</h3>
            <p>Total nombre d'articles{{ panier.totalQuantity }}</p>
            <p>Prix total: {{ panier.totalPrice }} ‚Ç¨</p>
            <button class="paye">Payer</button>
        </div>   

    </div>
    
    <a class="HP" href="#">Haut de page</a>
    
{% endblock %}